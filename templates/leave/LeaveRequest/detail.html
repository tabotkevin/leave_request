{% extends "leave/base.html" %}
{% load custom_tags %}

{% block content %}
  <table>
    <tr>
      <th>Request by</th>
      <td>{{ object.request_by.get_full_name | default_if_none:"--" }}</td>
    </tr>
    <tr>
      <th>Start</th>
      <td>{{ object.start | default_if_none:"--" }}</td>
    </tr>
    <tr>
      <th>End</th>
      <td>{{ object.end | default_if_none:"--" }}</td>
    </tr>
    <tr>
      <th>Manager</th>
      <td>{{ object.manager.get_full_name | default_if_none:"--" }}</td>
    </tr>
    <tr>
      <th>Status</th>
      <td>{{ object.status | to_str }}</td>
    </tr>
    <tr>
      <th>Review timestamp</th>
      <td>{{ object.review_ts | default_if_none:"--" }}</td>
    </tr>
  </table>
  {% if object.manager == request.user %}
    <form action="" method="POST">
      {% csrf_token %}
      <button type=submit name="status" value="accepted">Accept</button>
      <button type=submit name="status" value="rejected">Reject</button>
    </form>
  {% endif %}
  {% if object.request_by == request.user %}
    <p>
      <a class="button" href="{% url "leave:LeaveRequestUpdate" object.pk %}">Update</a>
    </p>
  {% endif %}
{% endblock %}
